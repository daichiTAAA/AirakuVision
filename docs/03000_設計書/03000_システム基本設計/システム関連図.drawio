<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2025-09-28T00:00:00.000Z" agent="5.0" etag="1" version="24.7.8" type="device">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="システム関連図">
    <mxGraphModel dx="1422" dy="820" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        
        <!-- 装着型デバイス層 -->
        <mxCell id="device-layer" value="装着型デバイス層" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=1;collapsible=0;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="40" y="40" width="200" height="120" as="geometry" />
        </mxCell>
        <mxCell id="thinklet-device" value="Thinkletデバイス&#xa;・一人称映像取得&#xa;・音声コマンド入力&#xa;・ビームフォーミング" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="device-layer">
          <mxGeometry x="10" y="30" width="180" height="80" as="geometry" />
        </mxCell>

        <!-- 配信・記録層 -->
        <mxCell id="stream-layer" value="配信・記録層" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=1;collapsible=0;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="320" y="40" width="280" height="180" as="geometry" />
        </mxCell>
        <mxCell id="mediamtx" value="MediaMTX&#xa;・WHIP受信&#xa;・WHEP配信&#xa;・録画機能" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="stream-layer">
          <mxGeometry x="10" y="30" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hls-server" value="HLS配信&#xa;・録画再生&#xa;・低遅延対応" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="stream-layer">
          <mxGeometry x="150" y="30" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="storage" value="映像ストレージ&#xa;・録画ファイル管理&#xa;・メタデータ保存" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="stream-layer">
          <mxGeometry x="80" y="110" width="120" height="60" as="geometry" />
        </mxCell>

        <!-- 業務サービス層 -->
        <mxCell id="business-layer" value="業務サービス層" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=1;collapsible=0;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="680" y="40" width="400" height="240" as="geometry" />
        </mxCell>
        <mxCell id="work-events-api" value="/v1/work-events&#xa;・開始/終了/中断/再開&#xa;・イベント登録" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;" vertex="1" parent="business-layer">
          <mxGeometry x="10" y="30" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="device-status-api" value="/v1/devices/{id}/status&#xa;・端末状態管理&#xa;・次期待月連番" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;" vertex="1" parent="business-layer">
          <mxGeometry x="210" y="30" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="month-serial-api" value="/v1/devices/{id}/month-serial:set&#xa;・月連番上書き&#xa;・順序リスト照合" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;" vertex="1" parent="business-layer">
          <mxGeometry x="10" y="100" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="workflow-mgmt" value="ワークフロー管理&#xa;・生産順序リスト&#xa;・工程情報管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;" vertex="1" parent="business-layer">
          <mxGeometry x="210" y="100" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="notification" value="運用監視機能&#xa;・アラート発報&#xa;・フェイルオーバー" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#ff6666;" vertex="1" parent="business-layer">
          <mxGeometry x="110" y="170" width="180" height="60" as="geometry" />
        </mxCell>

        <!-- データマネジメント層 -->
        <mxCell id="data-layer" value="データマネジメント層" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=1;collapsible=0;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="40" y="320" width="560" height="180" as="geometry" />
        </mxCell>
        <mxCell id="event-db" value="イベントDB&#xa;・作業イベントログ&#xa;・端末状態履歴" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="data-layer">
          <mxGeometry x="20" y="30" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="metadata-db" value="映像メタデータDB&#xa;・録画ファイル情報&#xa;・工程紐付け" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="data-layer">
          <mxGeometry x="160" y="30" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="learning-data" value="学習データ管理&#xa;・要素作業ラベル&#xa;・分析結果保存" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="data-layer">
          <mxGeometry x="300" y="30" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="report-data" value="レポート基盤&#xa;・集計データ&#xa;・KPI計算" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="data-layer">
          <mxGeometry x="440" y="30" width="100" height="70" as="geometry" />
        </mxCell>
        <mxCell id="batch-process" value="バッチ処理&#xa;・データ統合&#xa;・ETL処理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="data-layer">
          <mxGeometry x="220" y="120" width="120" height="50" as="geometry" />
        </mxCell>

        <!-- 分析・可視化層 -->
        <mxCell id="ui-layer" value="分析・可視化層" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=1;collapsible=0;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="680" y="320" width="400" height="240" as="geometry" />
        </mxCell>
        <mxCell id="analysis-ui" value="要素作業分析UI&#xa;・録画映像再生&#xa;・候補区間提示&#xa;・ラベル修正" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="ui-layer">
          <mxGeometry x="20" y="30" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="dashboard" value="監視ダッシュボード&#xa;・進捗監視&#xa;・異常検知&#xa;・リアルタイム表示" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="ui-layer">
          <mxGeometry x="200" y="30" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="report-ui" value="レポート機能&#xa;・作業時間分析&#xa;・改善提案&#xa;・トレンド分析" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="ui-layer">
          <mxGeometry x="20" y="130" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="auth-mgmt" value="認証・認可&#xa;・ユーザー管理&#xa;・ロール制御&#xa;・権限管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#ff6666;" vertex="1" parent="ui-layer">
          <mxGeometry x="200" y="130" width="180" height="80" as="geometry" />
        </mxCell>

        <!-- 外部システム -->
        <mxCell id="external" value="外部システム" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=1;collapsible=0;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="40" y="580" width="200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="factory-network" value="工場ネットワーク&#xa;・現場接続&#xa;・帯域制御" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="external">
          <mxGeometry x="20" y="30" width="160" height="60" as="geometry" />
        </mxCell>

        <!-- プライバシー制御 -->
        <mxCell id="privacy" value="プライバシー制御" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=1;collapsible=0;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#ff0000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="320" y="580" width="280" height="100" as="geometry" />
        </mxCell>
        <mxCell id="privacy-zone" value="プライバシーゾーン検知&#xa;・入退室検知&#xa;・配信停止/再開制御" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#ff0000;" vertex="1" parent="privacy">
          <mxGeometry x="20" y="30" width="240" height="60" as="geometry" />
        </mxCell>

        <!-- 運用監視 -->
        <mxCell id="ops" value="運用監視" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=1;collapsible=0;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#e6f3ff;strokeColor=#0066cc;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="680" y="580" width="400" height="100" as="geometry" />
        </mxCell>
        <mxCell id="monitoring" value="システム監視・ログ管理・パフォーマンス監視・バックアップ・復旧" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6f3ff;strokeColor=#0066cc;" vertex="1" parent="ops">
          <mxGeometry x="20" y="30" width="360" height="60" as="geometry" />
        </mxCell>

        <!-- データフロー矢印 -->
        <!-- デバイス -> 配信・記録 -->
        <mxCell id="flow1" value="WHIP&#xa;映像・音声" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#82b366;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="thinklet-device" target="mediamtx">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- デバイス -> 業務サービス -->
        <mxCell id="flow2" value="音声コマンド&#xa;作業イベント" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d79b00;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="thinklet-device" target="work-events-api">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- 配信・記録 -> データマネジメント -->
        <mxCell id="flow3" value="録画完了通知&#xa;メタデータ" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#b85450;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="storage" target="metadata-db">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- 業務サービス -> データマネジメント -->
        <mxCell id="flow4" value="イベントログ&#xa;工程情報" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#9673a6;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="workflow-mgmt" target="event-db">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- データマネジメント -> 分析・可視化 -->
        <mxCell id="flow5" value="分析データ&#xa;レポート" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#6c8ebf;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="report-data" target="analysis-ui">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- 分析・可視化 -> データマネジメント -->
        <mxCell id="flow6" value="修正結果&#xa;学習データ" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d6b656;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="analysis-ui" target="learning-data">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- 配信・記録 -> 分析・可視化 (リアルタイム配信) -->
        <mxCell id="flow7" value="WHEP&#xa;リアルタイム配信" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#82b366;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="hls-server" target="dashboard">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- 業務サービス -> 分析・可視化 (監視データ) -->
        <mxCell id="flow8" value="状態監視&#xa;アラート" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#ff6666;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="notification" target="dashboard">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- プライバシー制御の接続 -->
        <mxCell id="flow9" value="制御信号" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#ff0000;dashed=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="privacy-zone" target="mediamtx">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- 外部システムの接続 -->
        <mxCell id="flow10" value="ネットワーク接続" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#666666;dashed=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="factory-network" target="thinklet-device">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- 運用監視の接続 -->
        <mxCell id="flow11" value="監視・ログ収集" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#0066cc;dashed=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="monitoring" target="notification">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- タイトル -->
        <mxCell id="title" value="AirakuVision システム関連図" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="440" y="10" width="280" height="20" as="geometry" />
        </mxCell>

        <!-- 凡例 -->
        <mxCell id="legend" value="凡例" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=1;collapsible=0;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="1120" y="40" width="200" height="200" as="geometry" />
        </mxCell>
        <mxCell id="legend1" value="実線：データフロー" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="legend">
          <mxGeometry x="10" y="30" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend2" value="点線：制御・監視" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="legend">
          <mxGeometry x="10" y="50" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend3" value="紫：装着型デバイス層" style="text;html=1;strokeColor=#9673a6;fillColor=#e1d5e7;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;" vertex="1" parent="legend">
          <mxGeometry x="10" y="80" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend4" value="緑：配信・記録層" style="text;html=1;strokeColor=#82b366;fillColor=#d5e8d4;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;" vertex="1" parent="legend">
          <mxGeometry x="10" y="100" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend5" value="オレンジ：業務サービス層" style="text;html=1;strokeColor=#d79b00;fillColor=#ffe6cc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;" vertex="1" parent="legend">
          <mxGeometry x="10" y="120" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend6" value="ピンク：データマネジメント層" style="text;html=1;strokeColor=#b85450;fillColor=#f8cecc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;" vertex="1" parent="legend">
          <mxGeometry x="10" y="140" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend7" value="青：分析・可視化層" style="text;html=1;strokeColor=#6c8ebf;fillColor=#dae8fc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;" vertex="1" parent="legend">
          <mxGeometry x="10" y="160" width="180" height="20" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
